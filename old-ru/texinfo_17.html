<HTML>
<HEAD>
<META HTTP-EQUIV="content-type" content="text/html; charset=windows-1251">
<!-- Created by texi2html 1.57 from /ibend/man/texinfo/html/texinfo.texi on September, 29  1999 -->

<TITLE>Texinfo 4.0 - Условно видимый текст</TITLE>
</HEAD>
<BODY bgcolor="white" text="black">
 [<A HREF="texinfo_toc.html">Contents</A>] &#160; [<A HREF="texinfo_16.html">Previous</A>] &#160; [<A HREF="texinfo_18.html">Next</A>] &#160;<BR><HR><BR>

<H1><A NAME="sec196">Условно видимый текст</A></H1>
<P>
<A NAME="idx704"></A>
<A NAME="idx705"></A>
<A NAME="idx706"></A>
<A NAME="idx707"></A>


<P>
Иногда полезно иметь различающийся текст в разных выходных форматах.
Например, вы можете использовать <EM>условные команды</EM>, чтобы указать
разный текст для печатного руководства и для Info-файла.


<P>
Условные команды не могут быть вложенными.


<P>
Условные команды делятся на следующие категории:



<UL>
<LI>Команды для HTML, Info или TeX.

<LI>Команды не для HTML, Info или TeX.

<LI>Команды непосредственного вызова TeX или HTML.

<LI>

Подстановка текста для всех форматов и проверка состояния флага.
</UL>



<H2><A NAME="sec197">Условные команды</A></H2>

<P>
<A NAME="idx708"></A>
Команда <CODE>@ifinfo</CODE> начинает блок текста, который должен
игнорироваться TeX при наборе печатного руководства.  Этот блок
появится только в Info-файле.  Команда <CODE>@ifinfo</CODE> должна
встречаться на отдельной строке; завершайте блок текста, предназначенный
только для Info, строкой, содержащей одну команду <CODE>@end ifinfo</CODE>.
В начале Texinfo-файла, разрешения на копирование для Info заключены в
блок, помеченный командами <CODE>@ifinfo</CODE> и <CODE>@end ifinfo</CODE>.
(т рзС зш С  цш  <A HREF="texinfo_4.html#sec35">Обзор и разрешения на копирование для Info</A>.)


<P>
<A NAME="idx709"></A>
<A NAME="idx710"></A>
Команды <CODE>@iftex</CODE> и <CODE>@end iftex</CODE> похожи на команды
<CODE>@ifinfo</CODE> и <CODE>@end ifinfo</CODE>, только они задают текст,
появляющийся в печатном руководстве, но не в Info-файле.  Точно так же
команды <CODE>@ifhtml</CODE> и <CODE>@end ifhtml</CODE> задают текст, появляющийся
только при выводе в формате HTML.


<P>
Например,



<PRE>
@iftex
Этот текст появится только в печатном руководстве.
@end iftex
@ifinfo
Этот текст появится только в Info.
@end ifinfo
@ifhtml
А этот только в HTML.
@end ifhtml
</PRE>

<P>
Пример выше выдает следующую строку:
Этот текст появится только в печатном руководстве.
А этот только в HTML.


<P>
Заметьте, что вы видите только одну из двух строк; которую именно,
зависит от того, читаете ли вы Info или печатную версию этого
руководства.




<H2><A NAME="sec198">Отрицательные условные команды</A></H2>
<P>
<A NAME="idx711"></A>
<A NAME="idx712"></A>
<A NAME="idx713"></A>


<P>
Вы можете пометить фрагмент текста, который должен появляться при выводе
во всех форматах, <EM>кроме</EM> некоторого формата, задаваемого одной из
следующих <CODE>@ifnot...</CODE> команд:



<PRE>
@ifnothtml ... @end ifnothtml
@ifnotinfo ... @end ifnotinfo
@ifnottex ... @end ifnottex
</PRE>

<P>
(Команды <CODE>@ifnot...</CODE> и <CODE>@end</CODE> на самом деле нужно писать
на отдельных строках.)


<P>
Если вывод производится не в заданном формате, то блок включается в
выходной файл.  Иначе он игнорируется.


<P>
Блоки, ограниченные этими командами, содержат обычный исходный код
Texinfo, как в блоке <CODE>@iftex</CODE>, а не непосредственные команды
программы форматирования, как в блоке <CODE>@tex</CODE> (Т рзС зш С  цш  <A HREF="texinfo_17.html#sec199">Непосредственный вызов команд программы форматирования</A>).




<H2><A NAME="sec199">Непосредственный вызов команд программы форматирования</A></H2>
<P>
<A NAME="idx714"></A>
<A NAME="idx715"></A>
<A NAME="idx716"></A>
<A NAME="idx717"></A>
<A NAME="idx718"></A>
<A NAME="idx719"></A>
<A NAME="idx720"></A>
<A NAME="idx721"></A>


<P>
Внутри области, ограниченной <CODE>@iftex</CODE> и <CODE>@end iftex</CODE>, вы
можете вставлять некоторые обычные команды TeX.  Info игнорирует эти
команды, так как они находятся в той части файла, которую читает только
TeX.  Вы можете писать команды TeX, как вы писали бы их в обычном
TeX-файле, но заменяя используемый TeX символ <SAMP>`\'</SAMP> символом
<SAMP>`@'</SAMP>.  Например, в секции Texinfo-файла <CODE>@titlepage</CODE> вы
можете использовать команду TeX <CODE>@vskip</CODE> для форматирования
страницы с информацией об авторских правах.  (Команда <CODE>@titlepage</CODE>
автоматически заставляет Info игнорировать область, точно так же, как
команда <CODE>@iftex</CODE>.)


<P>
Однако многие особенности, присущие plain TeX, не будут работать,
потому что они перекрываются средствами Texinfo.


<P>
<A NAME="idx722"></A>
Вы можете полностью перейти в режим plain TeX и использовать символ
<SAMP>`\'</SAMP> в командах TeX, пометив область командами <CODE>@tex</CODE> и
<CODE>@end tex</CODE>.  (Команда <CODE>@tex</CODE> также заставляет Info
игнорировать область, подобно команде <CODE>@iftex</CODE>.)  Единственное
исключение состоит в том, что символ <CODE>@</CODE> все еще начинает команду,
чтобы <CODE>@end tex</CODE> была правильно распознана.


<P>
<A NAME="idx723"></A>
Вот, для примера, математическое выражение, записанное в формате plain
TeX:



<PRE>
@tex
$$ \chi^2 = \sum_{i=1}^N
          \left (y_i - (a + b x_i)
          \over \sigma_i\right)^2 $$
@end tex
</PRE>

<P>
Вывод этого примера появится только в печатном руководстве.
Если вы читаете это в  Info, вы не увидите уравнения, которое будет
выведено в печатном руководстве.
В печатном руководстве выражение, написанное выше выглядит так:


<P>
<A NAME="idx724"></A>
<A NAME="idx725"></A>
Аналогично, вы можете использовать <CODE>@ifhtml ... @end ifhtml</CODE>
для ограничения области, которую нужно включить только при выводе в
формате HTML, и <CODE>@html ... @end html</CODE> для ограничения
области, написанной непосредственно на HTML (опять же, за исключением
<CODE>@</CODE>, так же служащего сигнальным символом, чтобы команда
<CODE>@end</CODE> могла быть распознана.)




<H2><A NAME="sec200"><CODE>@set</CODE>, <CODE>@clear</CODE> и <CODE>@value</CODE></A></H2>

<P>
Вы можете указать программам форматирования Texinfo, какие части
Texinfo-файла нужно форматировать, а какие пропустить, используя команды
<CODE>@set</CODE>, <CODE>@clear</CODE>, <CODE>@ifset</CODE> и <CODE>@ifclear</CODE>.


<P>
Кроме того, вы можете использовать команду <CODE>@set <VAR>флаг</VAR></CODE>,
чтобы установить значение <VAR>флага</VAR> равным строке символов, и команду
<CODE>@value{<VAR>флаг</VAR>}</CODE>, чтобы вставить эту строку в текст.  Вы
можете использовать <CODE>@set</CODE>, например, для установки даты и
вставлять эту дату в несколько мест Texinfo-файла с помощью
<CODE>@value</CODE>.




<H3><A NAME="sec201"><CODE>@ifset</CODE> и <CODE>@ifclear</CODE></A></H3>

<P>
<A NAME="idx726"></A>
Когда <VAR>флаг</VAR> установлен, текст между соответствующими командами
<CODE>@ifset <VAR>флаг</VAR></CODE> и <CODE>@end ifset</CODE> будет отформатирован.
Если <VAR>флаг</VAR> сброшен, программы форматирования Texinfo <EM>не</EM>
форматируют текст.


<P>
Используйте команду <CODE>@set <VAR>флаг</VAR></CODE> для включения, или
<EM>установки</EM> <VAR>флага</VAR>; имя <EM>флага</EM> может быть любым одиночным
словом, содержащим буквы, цифры, дефисы или подчерки.


<P>
Формат команды выглядит так:
<A NAME="idx727"></A>



<PRE>
@set <VAR>флаг</VAR>
</PRE>

<P>
Пишите условно форматируемый текст между командами <CODE>@ifset
<VAR>флаг</VAR></CODE> и <CODE>@end ifset</CODE> следующим образом:



<PRE>
@ifset <VAR>флаг</VAR>
<VAR>условный-текст</VAR>
@end ifset
</PRE>

<P>
Например, вы можете создать один документ, у которого есть два варианта,
скажем, `маленькое' и `большое' руководство:



<PRE>
Вы можете использовать эту машину для выкапывания
кустов, не повреждая их.

@set большое

@ifset большое
Она также способна выкапывать взрослые деревья.
@end ifset

Не забудьте быстро пересадить ...
</PRE>

<P>
В этом примере, текст между <CODE>@ifset большое</CODE> и <CODE>@end ifset</CODE>
будет отформатирован, потому что флаг <CODE>большое</CODE> установлен.


<P>
<A NAME="idx728"></A>
Используйте команду <CODE>@clear <VAR>флаг</VAR></CODE> для выключения, или
<EM>сброса</EM> флага.  Сбрасывание флага противоположно установке.
Команда выглядит следующим образом:



<PRE>
@clear <VAR>флаг</VAR>
</PRE>

<P>
Пишите эту команду на отдельной строке.


<P>
Когда <VAR>флаг</VAR> сброшен, команды форматирования Texinfo <EM>не</EM>
форматируют текст между <CODE>@ifset <VAR>флаг</VAR></CODE> и <CODE>@end ifset</CODE>;
этот текст игнорируется и не появляется ни в печатном руководстве, ни в
выводе Info.


<P>
Например, если вы сбросили флаг в предыдущем примере, написав команду
<CODE>@clear большое</CODE> после команды <CODE>@set большое</CODE> (но до
условного текста), то команды форматирования Texinfo проигнорируют текст
между <CODE>@ifset большое</CODE> и <CODE>@end ifset</CODE>.  Этот текст не
появится в форматированном выводе; и в Info, и в печатном руководстве вы
увидите только строки, говорящие "Вы можете использовать эту машину для
выкапывания кустов, не повреждая их.  Не забудьте быстро пересадить
...".


<P>
<A NAME="idx729"></A>
Если флаг сброшен командой <CODE>@clear <VAR>флаг</VAR></CODE>, то текст между
соответствующими парами команд <CODE>@ifset <VAR>флаг</VAR></CODE> и <CODE>@end
ifset</CODE> будет отформатирован.  Но если флаг установлен с помощью
<CODE>@set <VAR>флаг</VAR></CODE>, то команды форматирования <EM>не</EM> форматируют
текст между командами <CODE>@ifclear</CODE> и <CODE>@end ifclear</CODE>; они
игнорируют этот текст.  Команда <CODE>@ifclear</CODE> выглядит следующим
образом:



<PRE>
@ifclear <VAR>флаг</VAR>
</PRE>

<P>
Кратко, существуют такие команды:


<DL COMPACT>

<DT><CODE>@set <VAR>флаг</VAR></CODE>
<DD>
Сообщить командам форматирования Texinfo, что <VAR>флаг</VAR>
установлен.

<DT><CODE>@clear <VAR>флаг</VAR></CODE>
<DD>
Сообщить командам форматирования Texinfo, что <VAR>флаг</VAR> сброшен.

<DT><CODE>@ifset <VAR>флаг</VAR></CODE>
<DD>
Если <VAR>флаг</VAR> установлен, предписать командам форматирования Texinfo
форматировать текст до следующей команды <CODE>@end ifset</CODE>.

Если <VAR>флаг</VAR> сброшен, предписать командам форматирования Texinfo
игнорировать текст до следующей команды <CODE>@end ifset</CODE>.

<DT><CODE>@ifclear <VAR>флаг</VAR></CODE>
<DD>
Если <VAR>флаг</VAR> установлен, предписать командам форматирования Texinfo
игнорировать текст до следующей команды <CODE>@end ifclear</CODE>.

Если <VAR>флаг</VAR> сброшен, предписать командам форматирования Texinfo
игнорировать текст до следующей команды <CODE>@end ifclear</CODE>.
</DL>



<H3><A NAME="sec202"><CODE>@set</CODE> и <CODE>@value</CODE></A></H3>
<P>
<A NAME="idx730"></A>


<P>
Вы можете использовать команду <CODE>@set</CODE> для установки значения
флага, которое потом может быть получено командой <CODE>@value</CODE>.  Флаг
--- это идентификатор; для наилучших результатов используйте в имени
флага только буквы и цифры, но не <SAMP>`-'</SAMP> или <SAMP>`_'</SAMP> -- они
сработают в некоторых контекстах, но не всегда, из-за ограничений в
TeX.  Значение -- это просто цепочка знаков, остаток строки ввода.


<P>
Команда <CODE>@set</CODE> записывается подобным образом:



<PRE>
@set foo Это строка.
</PRE>

<P>
Этот пример устанавливает значение флага <CODE>foo</CODE> равным "Это
строка.".


<P>
Программы форматирования Texinfo замещают команду
<CODE>@value{<VAR>флаг</VAR>}</CODE> строкой, в значение которой установлен
<VAR>флаг</VAR>.  Таким образом, если <CODE>foo</CODE> установлен, как показано
выше, то программы форматирования Texinfo преобразуют



<PRE>
@value{foo}
в строку
Это строка.
</PRE>

<P>
Вы можете писать команду <CODE>@value</CODE> внутри абзаца, но команду
<CODE>@set</CODE> вы должны писать на отдельной строке.


<P>
Если вы напишите команду <CODE>@set</CODE> следующим образом:



<PRE>
@set foo
</PRE>

<P>
не задавая строку, то значением <CODE>foo</CODE> будет пустая строка.


<P>
Если вы очищаете ранее установленный флаг командой <CODE>@clear
<VAR>флаг</VAR></CODE>, последующая команда <CODE>@value{флаг}</CODE> будет неверна, и
строка заменяется сообщением об ошибке: <SAMP>`{Значение "<VAR>флаг</VAR>" не
задано}'</SAMP>.


<P>
Например, если вы установили <CODE>foo</CODE> так:



<PRE>
@set насколько очень, очень, очень
</PRE>

<P>
то программы форматирования преобразуют



<PRE>
Сегодня @value{насколько} сырой день.
в строку
Сегодня очень, очень, очень сырой день.
</PRE>

<P>
Если вы напишите



<PRE>
@clear насколько
</PRE>

<P>
то программы форматирования преобразуют



<PRE>
Сегодня @value{насколько} сырой день.
в строку
Сегодня {Значение "насколько" не задано} сырой день.
</PRE>



<H3><A NAME="sec203">Пример применения <CODE>@value</CODE></A></H3>

<P>
Вы можете использовать команду <CODE>@value</CODE>, чтобы уменьшить
количество мест в тексте, которые вам нужно изменить при внесении в
руководство исправлений или дополнений.  Здесь показано, как это сделано
в <CITE>Руководстве по GNU Make</CITE>:



<OL>
<LI>

Установлены флаги:


<PRE>
@set EDITION 0.35 Beta
@set VERSION 3.63 Beta
@set UPDATED 14 августа 1992
@set UPDATE-MONTH август 1992
</PRE>

<LI>

Написан текст для первой секции <CODE>@ifinfo</CODE>, для тех, кто читает
Texinfo-файл:


<PRE>
Это редакция @value{EDITION},
последние исправления @value{UPDATED},
@cite{Руководства по GNU Make}
для @code{make} версии @value{VERSION}.
</PRE>

<LI>

Написан текст для титульного листа, для читающих печатное руководство:


<PRE>
@title GNU Make
@subtitle Программа управления перекомпиляцией
@subtitle Редакция @value{EDITION}, ...
@subtitle @value{UPDATE-MONTH}
</PRE>

(На обложке книги, дата, сообщающая месяц и год выпуска, смотрится более
уместно, чем показывающая кроме этого также и число.)

<LI>

Написан текст для первой ноды, для людей, читающих Info-файл:


<PRE>
Это редакция @value{EDITION},
последние исправления @value{UPDATED},
@cite{Руководства по GNU Make}
для @code{make} версии @value{VERSION}.
</PRE>

После форматирования руководства текст в первой секции <CODE>@ifinfo</CODE>
выглядит следующим образом:


<PRE>
Это редакция 0.35 Beta `Руководства по GNU Make',
последние исправления 14 августа 1992,
для `make' версии 3.63 Beta.
</PRE>

</OL>

<P>
Когда вы исправляете руководство, измените только значения флагов; нет
необходимости переписывать три секции.
<P></P><HR>
 [<A HREF="texinfo_toc.html">Contents</A>] &#160; [<A HREF="texinfo_16.html">Previous</A>] &#160; [<A HREF="texinfo_18.html">Next</A>] &#160;<BR><HR><BR>

<!-- Rambler Stuff-->
<table Border=0 Width="100%" CELLPADDING="0" CELLSPACING="0" BORDER="0"
<tr>
<td ALign=Left vAlign=TOP>
<!--begin of Top100-->
<a href="http://top100.rambler.ru/top100/"><img src="http://counter.rambler.ru/top100.cnt?330202" alt="Rambler's Top100" width=1 height=1 border=0></a>
<!--end of Top100 code-->
</td>
<td ALign="Right" vALIGN=TOP>
<!--begin of Top100 logo-->
<a href="http://top100.rambler.ru/top100/">
<img src="http://top100-images.rambler.ru/top100/banner-88x31-rambler-blue.gif" alt="Rambler's Top100" width=88 height=31 border=0></a>
<!--end of Top100 logo -->
</td>
</tr>
</table>
<!--/Rambler Stuff -->
</body></html>


<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-38951496-1']);
  _gaq.push(['_trackPageview']);
  // st1 Sunday, 06-Dec-2015 19:08:25 MSK
  // st2 109.252.59.207
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
