<HTML>
<HEAD>
<META HTTP-EQUIV="content-type" content="text/html;charset=windows-1251">
<!-- Created by texi2html 1.57 from /ibend/man/texinfo/html/texinfo.texi on September, 29  1999 -->

<TITLE>Texinfo 4.0 - Форматирование и печать твердой копии</TITLE>
</HEAD>
<BODY bgcolor="white" text="black">
 [<A HREF="texinfo_toc.html">Contents</A>] &#160; [<A HREF="texinfo_19.html">Previous</A>] &#160; [<A HREF="texinfo_21.html">Next</A>] &#160;<BR><HR><BR>

<H1><A NAME="sec213">Форматирование и печать твердой копии</A></H1>
<P>
<A NAME="idx778"></A>
<A NAME="idx779"></A>
<A NAME="idx780"></A>
<A NAME="idx781"></A>
<A NAME="idx782"></A>
<A NAME="idx783"></A>
<A NAME="idx784"></A>


<P>
Есть три основные команды оболочки для создания печатного руководства из
Texinfo-файла: одна для преобразования Texinfo-файла в печатаемый файл,
вторая для сортировки именных указателей и третья для печати
отформатированного документа.  Когда вы используете эти команды, вы
можете работать непосредственно из оболочки операционной системы или из
оболочки внутри GNU Emacs.


<P>
Если вы пользуетесь GNU Emacs, вы можете использовать вместо команд
оболочки команды, предоставляемые режимом Texinfo.  Кроме трех команд
для форматирования файла, сортировки именных указателей и печати
результата, режим Texinfo предоставляет привязки ключей для команд
центрирования буфера вывода, показа очереди печати и удаления задания из
очереди печати.




<H2><A NAME="sec214">Используйте TeX</A></H2>

<P>
Для форматирования Texinfo-файлов используется программа для набора,
называемая TeX.  TeX -- это очень мощная программа подготовки
печатных документов и, если ее правильно использовать, работает
исключительно хорошо.  (т рзС зш С  цш  <A HREF="texinfo_31.html#sec274">Как получить TeX</A>, для
информации о том, как получить TeX.)


<P>
Команды <CODE>makeinfo</CODE>, <CODE>texinfo-format-region</CODE> и
<CODE>texinfo-format-buffer</CODE> читают в Texinfo-файле те же самые
@-команды, что и TeX, но обрабатывают их иначе для создания
Info-файла; смотрите С  цш  <A HREF="texinfo_21.html#sec230">Создание Info-файла</A>.



<H2><A NAME="sec215">Форматирование с помощью <CODE>tex</CODE> и <CODE>texindex</CODE></A></H2>
<P>
<A NAME="idx785"></A>
<A NAME="idx786"></A>


<P>
Форматируйте Texinfo-файл с помощью команды оболочки <CODE>tex</CODE>,
за которой стоит имя Texinfo-файла.  Например:



<PRE>
tex foo.texi
</PRE>

<P>
TeX создаст <EM>DVI-файл</EM>, а также несколько
вспомогательных файлов, содержащих сведения об именных указателях,
перекрестных ссылках и другие.  DVI-файл (от <EM>DeVice Independent</EM>,
то есть независимый от устройства) можно напечатать практически на любом
виде печатающих устройств (смотрите следующие разделы).


<P>
<A NAME="idx787"></A>
Форматирующая команда <CODE>tex</CODE> сама по себе не сортирует именные
указатели, она записывает файл с несортированными данными для
указателей.  (Команда <CODE>texi2dvi</CODE> автоматически создает именные
указатели; Т рзС зш С  цш  <A HREF="texinfo_20.html#sec216">Форматирование с помощью <CODE>texi2dvi</CODE></A>.)  Чтобы создать печатный именной указатель после
прогона команды <CODE>tex</CODE>, сначала вам понадобится для работы
сортированный указатель.  Команда <CODE>texindex</CODE> сортирует именные
указатели.  (Исходный файл <TT>`texindex.c'</TT> поставляется как часть
стандартного дистрибутива Texinfo, кроме того, его можно найти в других
местах.)

<P>
<A NAME="idx788"></A>
<A NAME="idx789"></A>
Форматирующая команда <CODE>tex</CODE> выдает несортированные файлы именных
указателей с именами, подчиняющимися стандартному соглашению: имя вашего
главного входного файла с удаленным расширением <SAMP>`.tex'</SAMP> (или другим,
Т рзС зш С  цш  `tex invocation'   <CITE>Web2c</CITE>), за которым следуют две буквы
имени указателя.  Например, необработанные выходные файлы с именными
указателями для входного файла <TT>`foo.texinfo'</TT> назывались бы
<TT>`foo.cp'</TT>, <TT>`foo.vr'</TT>, <TT>`foo.fn'</TT>, <TT>`foo.tp'</TT>,
<TT>`foo.pg'</TT> и <TT>`foo.ky'</TT>.  Это в точности те аргументы, которые
нужно передать <CODE>texindex</CODE>.


<P>
<A NAME="idx790"></A>
Вместо явного задания всех файлов с несортированными именными
указателями, вы можете использовать <SAMP>`??'</SAMP> в качестве шаблона
оболочки и дать команду в такой форме:



<PRE>
texindex foo.??
</PRE>

<P>
Эта команда запустит <CODE>texindex</CODE> для всех файлов с несортированными
указателями, включая те, которые вы определили сами с помощью
<CODE>@defindex</CODE> или <CODE>@defcodeindex</CODE>.  (Вы также можете выполнить
<SAMP>`texindex foo.??'</SAMP>, даже если существуют файлы, называемые похожим
образом, с двухбуквенным расширением, такие как <SAMP>`foo.el'</SAMP>.  Команда
<CODE>texindex</CODE> сообщает о таких файлах, но игнорирует их.)


<P>
Для каждого заданного файла <CODE>texindex</CODE> создает файл с сортированным
именным указателем, имя которого получается добавлением <SAMP>`s'</SAMP> к концу
имени входного файла.  Команда <CODE>@printindex</CODE> ищет файлы с такими
именами (Т рзС зш С  цш  <A HREF="texinfo_5.html#sec48">Меню-указатели и печать именных указателей</A>).  <CODE>texindex</CODE> не изменяет
исходный файл.


<P>
После того, как вы отсортировали именные указатели, вам нужно снова
запустить форматирующую команду <CODE>tex</CODE> для Texinfo-файла.  Это
создаст DVI-файл, на этот раз с соответствующими действительности
вхождениями именных указателей.


<P>
Наконец, вам может понадобиться запустить <CODE>tex</CODE> еще один раз, чтобы
получить правильные номера страниц в перекрестных ссылках.


<P>
Кратко, вот процесс из пяти шагов:



<OL>
<LI>

Запустите <CODE>tex</CODE> для вашего Texinfo-файла.  Это создаст DVI-файл (с
неопределенными перекрестными ссылками и без именных указателей) и
исходные файлы (с двухбуквенными расширениями) с именными указателями.

<LI>

Запустите <CODE>texindex</CODE> для исходных файлов с именными указателями.
Это создаст соответствующие файлы (с трехбуквенными расширениями) с
сортированными указателями.

<LI>

Снова запустите <CODE>tex</CODE> для вашего Texinfo-файла.  Это заново создаст
DVI-файл, на этот раз с именными указателями и определенными
перекрестными ссылками, но номера страниц для перекрестных ссылок,
оставшиеся с последнего раза, как правило неверны.

<LI>

Опять отсортировать именные указатели с помощью <CODE>texindex</CODE>.

<LI>

Запустите <CODE>tex</CODE> последний раз.  На этот раз для перекрестных ссылок
записываются правильные номера страниц.
</OL>

<P>
<A NAME="idx791"></A>
Или это процесс из одного фага: запустите <CODE>texi2dvi</CODE> (Т рзС зш С  цш  <A HREF="texinfo_20.html#sec216">Форматирование с помощью <CODE>texi2dvi</CODE></A>).


<P>
Вам не нужно запускать <CODE>texindex</CODE> каждый раз после запуска
<CODE>tex</CODE>.  Если вы не этого не сделали, то при следующем запуске
форматирующая команда <CODE>tex</CODE> будет использовать файлы с
сортированными именными указателями, оставшиеся от прошлой работы
<CODE>texindex</CODE>.  Обычно это подходит в процессе отладки.


<P>
<A NAME="idx792"></A>
<A NAME="idx793"></A>
<A NAME="idx794"></A>
<A NAME="idx795"></A>
Иногда вы можете захотеть напечатать документ, хотя знаете, что он
неполный, или напечатать только одну главу документа.  В таком случае
обычные вспомогательные файлы, которые создает TeX, и предупреждения,
которые он выдает, когда перекрестные ссылки неверны, только мешают.  Вы
можете избежать их появления с помощью команды <CODE>@novalidate</CODE>,
которую вы должны дать <EM>до</EM> команды <CODE>@setfilename</CODE>
(Т рзС зш С  цш  <A HREF="texinfo_4.html#sec29"><CODE>@setfilename</CODE></A>).  Таким образом, начало
вашего файла могло бы выглядеть примерно так:



<PRE>
\input texinfo
@novalidate
@setfilename myfile.info
...
</PRE>

<P>
<CODE>@novalidate</CODE> также выключает проверку в <CODE>makeinfo</CODE>, как ее
ключ <CODE>--no-validate</CODE> (Т рзС зш С  цш  <A HREF="texinfo_21.html#sec234">Проверка указателей</A>).




<H2><A NAME="sec216">Форматирование с помощью <CODE>texi2dvi</CODE></A></H2>
<P>
<A NAME="idx796"></A>


<P>
Команда <CODE>texi2dvi</CODE> автоматически запускает <CODE>tex</CODE> и
<CODE>texindex</CODE> столько раз, сколько необходимо для создания DVI-файла с
сортированными именными указателями и всеми разрешенными перекрестными
ссылками.  Она упрощает последовательность <CODE>tex</CODE> ---
<CODE>texindex</CODE> -- <CODE>tex</CODE> -- <CODE>tex</CODE>, описанную в предыдущем
разделе.


<P>
Чтобы запустить <CODE>texi2dvi</CODE> для входного файла <TT>`foo.texi'</TT>,
сделайте следующее (где <SAMP>`prompt$ '</SAMP> это приглашение вашей оболочки):



<PRE>
prompt$ <KBD>texi2dvi foo.texi</KBD>
</PRE>

<P>
Как показано в этом примере, имена входных файлов для <CODE>texi2dvi</CODE>
должны включать любое расширение (<SAMP>`.texi'</SAMP>, <SAMP>`.texinfo'</SAMP>, etc.).
Под MS-DOS и, возможно, в других обстоятельствах вам может понадобиться
запускать <SAMP>`sh texi2dvi foo.texi'</SAMP>, а не полагаться на то, что
операционная система запустит для сценария <SAMP>`texi2dvi'</SAMP> оболочку.


<P>
Пожалуй, наиболее полезный ключ для <CODE>texi2dvi</CODE> -- это
<SAMP>`--texinfo=<VAR>команда</VAR>'</SAMP>.  Он вставляет <VAR>команду</VAR> на отдельной
строке после <CODE>@setfilename</CODE> во временной копии входного файла
перед запуском TeX.  С ним, вы можете задать различные форматы
печати, такие как <CODE>@smallbook</CODE> (Т рзС зш С  цш  <A HREF="texinfo_20.html#sec224">Печать "маленьких" книг</A>),
<CODE>@afourpaper</CODE> (Т рзС зш С  цш  <A HREF="texinfo_20.html#sec225">Печать на формате A4</A>) или <CODE>@pageparams</CODE>
(Т рзС зш С  цш  <A HREF="texinfo_20.html#sec226"><CODE>@pagesizes</CODE> [<VAR>ширина</VAR>][, <VAR>высота</VAR>]: Произвольный размер страниц</A>), не меняя в действительности исходный текст
документа.  (Вы также можете сделать это для всей системы с помощью
<TT>`texinfo.cnf'</TT>; Т рзС зш С  цш  <A HREF="texinfo_20.html#sec222">Подготовка к применению TeX</A>).


<P>
Для получения списка ключей запустите <SAMP>`texi2dvi --help'</SAMP>.




<H2><A NAME="sec217">Печать в оболочке с помощью <CODE>lpr -d</CODE></A></H2>
<P>
<A NAME="idx797"></A>


<P>
Точная команда для печати DVI-файла зависит от вашей системы, но обычно
это <SAMP>`lpr -d'</SAMP>.  Эта команда принимает имя DVI-файла без расширения
или с расширением <SAMP>`.dvi'</SAMP>.  (Если это команда <SAMP>`lpr'</SAMP>, вы должны
включать <SAMP>`.dvi'</SAMP>.)


<P>
Следующих команд, например, будет (может быть) достаточно для сортировки
именных указателей, форматирования и печати <CITE>Руководства по Bison</CITE>:



<PRE>
tex bison.texinfo
texindex bison.??
tex bison.texinfo
lpr -d bison.dvi
</PRE>

<P>
(Помните, что команды оболочки могут быть другими в вашей системе; но
это чаще всего используемые версии.)

<P>
При использовании сценария оболочки <CODE>texi2dvi</CODE>, вам нужно просто
напечатать:


<PRE>
texi2dvi bison.texinfo
lpr -d bison.dvi
</PRE>

<P>
<A NAME="idx798"></A>
<A NAME="idx799"></A>
<CODE>lpr</CODE> -- это стандартная программа в системах Unix, но она обычно
отсутствует в MS-DOS/MS-Windows.  Некоторые сетевые пакеты могут
поставляться с программой, называемой <CODE>lpr</CODE>, но их возможности
обычно ограничены посылкой файлов по сети на сервер печати, и обычно они
не поддерживают ключ <SAMP>`-d'</SAMP>.  Если вы насколько невезучи, что
работаете на одной из этих систем, у вас есть несколько альтернативных
способов напечатать DVI-файлы:



<UL>
<LI>Найдите и установите Unix-подобную программу <CODE>lpr</CODE> или ее

имитацию.  Если вы можете это сделать, то сможете печатать DVI-файлы
точно так, как описано выше.

<LI>Пошлите DVI-файлы в очередь DVI-файлов сетевого принтера.

Некоторые сетевые принтеры имеют специальные очереди для печати
DVI-файлов.  Вы наверняка можете настроить сетевое программное
обеспечение для посылки файлов в эту очередь.  В некоторых случаях
версия <CODE>lpr</CODE>, поставляемая с вашим сетевым программным
обеспечением, имеет специальные ключи для посылки файла в конкретную
очередь, как здесь:


<PRE>
lpr -Qdvi -hprint.server.domain bison.dvi
</PRE>

<LI>Преобразуйте DVI-файл в Postscript- или PCL-файл и пошлите его на

ваш локальный принтер.  т рзС зш С  цш  `dvips invocation'   <CITE>Dvips</CITE>,
страницы man для <CODE>dvilj</CODE> для подробного описания этих инструментов.
Когда DVI-файл преобразован в формат, который ваш принтер понимает
непосредственно, вы можете послать его на соответствующий порт, как
правило это <SAMP>`PRN'</SAMP>.
</UL>



<H2><A NAME="sec218">Из оболочки Emacs</A></H2>
<P>
<A NAME="idx800"></A>
<A NAME="idx801"></A>
<A NAME="idx802"></A>
<A NAME="idx803"></A>
<A NAME="idx804"></A>


<P>
Вы можете исполнить команды форматирования и печати из подчиненной
оболочки GNU Emacs.  Чтобы создать в Emacs оболочку, напечатайте
<KBD>M-x shell</KBD>.  В этой оболочке вы можете форматировать и печатать
документ.  т рзС зш С  цш  <A HREF="texinfo_20.html#sec213">Форматирование и печать твердой копии</A>, для
подробностей.


<P>
Вы можете переключиться в буфер оболочки и из него во время работы
<CODE>tex</CODE> и редактировать что-то еще.  Если вы форматируете длинный
документ на медленной машине, это может быть очень удобно.

<P>
Вы можете также использовать <CODE>texi2dvi</CODE> из оболочки Emacs.
Например, так можно применить <CODE>texi2dvi</CODE> для форматирования и
печати книги <CITE>Использование и перенос GNU CC</CITE> из оболочки в Emacs:



<PRE>
texi2dvi gcc.texinfo
lpr -d gcc.dvi
</PRE>



<H2><A NAME="sec219">Форматирование и печать в режиме Texinfo</A></H2>
<P>
<A NAME="idx805"></A>
<A NAME="idx806"></A>
<A NAME="idx807"></A>


<P>
Режим Texinfo предоставляет несколько предопределенных команд,
привязанных к ключам, для форматирования и печати с TeX.  Они
включают команды для сортировки именных указателей, просмотра очереди
печати, уничтожения форматирующего задания и центрирования буфера, в
котором происходят эти действия.

<DL COMPACT>

<DT><KBD>C-c C-t C-b</KBD>
<DD>
<DT><KBD>M-x texinfo-tex-buffer</KBD>
<DD>
Запускает <CODE>texi2dvi</CODE> для текущего буфера.
<DT><KBD>C-c C-t C-r</KBD>
<DD>
<DT><KBD>M-x texinfo-tex-region</KBD>
<DD>
Запускает TeX для текущего буфера.
<DT><KBD>C-c C-t C-i</KBD>
<DD>
<DT><KBD>M-x texinfo-texindex</KBD>
<DD>
Сортирует именные указатели Texinfo-файла, отформатированного с помощью
<CODE>texinfo-tex-region</CODE>.
<DT><KBD>C-c C-t C-p</KBD>
<DD>
<DT><KBD>M-x texinfo-tex-print</KBD>
<DD>
Печатает DVI-файл, отформатированный с помощью <CODE>texinfo-tex-region</CODE>
или <CODE>texinfo-tex-buffer</CODE>.

<DT><KBD>C-c C-t C-q</KBD>
<DD>
<DT><KBD>M-x tex-show-print-queue</KBD>
<DD>
Показывает очередь печати.
<DT><KBD>C-c C-t C-d</KBD>
<DD>
<DT><KBD>M-x texinfo-delete-from-print-queue</KBD>
<DD>
Удаляет задание из очереди печати; у вас запросят номер задания,
показанный ранее командой <KBD>C-c C-t C-q</KBD>
(<CODE>texinfo-show-tex-print-queue</CODE>).
<DT><KBD>C-c C-t C-k</KBD>
<DD>
<DT><KBD>M-x tex-kill-job</KBD>
<DD>
Уничтожает работающее в данный момент задание TeX, запущенное с
помощью <CODE>texinfo-tex-region</CODE> или <CODE>texinfo-tex-buffer</CODE>, или
любой другой процесс, работающий в буфере оболочки Texinfo.
<DT><KBD>C-c C-t C-x</KBD>
<DD>
<DT><KBD>M-x texinfo-quit-job</KBD>
<DD>
Прекращает форматирующее задание TeX, которое было остановлено из-за
ошибки, послав ему <KBD>x</KBD>.  Когда вы делаете это, TeX сохраняет
запись сделанных действий в <TT>`.log'</TT>-файле.
<DT><KBD>C-c C-t C-l</KBD>
<DD>
<DT><KBD>M-x tex-recenter-output-buffer</KBD>
<DD>
Перерисовать буфер оболочки, в котором запущены форматирующие и
печатающие команды TeX, для показа последних строк вывода.</DL>

<P>
Таким образом, обычная последовательность команд для форматирования
буфера выглядит, как показано ниже (с комментариями справа):


<PRE>
C-c C-t C-b             Запустить <CODE>texi2dvi</CODE> для буфера.
C-c C-t C-p             Напечатать DVI-файл.
C-c C-t C-q             Показать очередь принтера.
</PRE>

<P>
Команды форматирования с TeX в режиме Texinfo запускают в Emacs
подоболочку, называемую <TT>`*tex-shell*'</TT>.  Команды
<CODE>texinfo-tex-command</CODE>, <CODE>texinfo-texindex-command</CODE> и
<CODE>tex-dvi-print-command</CODE> работают в этой оболочке.


<P>
Вы можете наблюдать за работой команд в буфере <SAMP>`*tex-shell*'</SAMP>,
переключаться в него и из него и использовать буфер <SAMP>`*tex-shell*'</SAMP>
как любой другой буфер оболочки.

<P>
Команды печати и форматирования зависят от нескольких переменных.  Их
значения по умолчанию:



<PRE>
     Переменная                      Значение по умолчанию

texinfo-texi2dvi-command                  "texi2dvi"
texinfo-tex-command                       "tex"
texinfo-texindex-command                  "texindex"
texinfo-delete-from-print-queue-command   "lprm"
texinfo-tex-trailer                       "@bye"
tex-start-of-header                       "%**start"
tex-end-of-header                         "%**end"
tex-dvi-print-command                     "lpr -d"
tex-show-queue-command                    "lpq"
</PRE>

<P>
Вы можете изменить значения этих переменных с помощью команды <KBD>M-x
edit-options</KBD> (Т рзС зш С  цш  `Editing Variable Values'   <CITE>Руководство по GNU Emacs</CITE>), команды <KBD>M-x set-variable</KBD>
(Т рзС зш С  цш  `Examining and Setting Variables'   <CITE>Руководство по GNU Emacs</CITE>) или вашего файла инициализации <TT>`.emacs'</TT> (Т рзС зш С  цш  `Init File'   <CITE>Руководство по GNU Emacs</CITE>).

<P>
<A NAME="idx808"></A>
<A NAME="idx809"></A>
Начиная с версии 20, GNU Emacs предоставляет дружественный интерфейс,
называемый <EM>Customize</EM>, для изменения значений переменных,
задаваемых пользователем.  т рзС зш С  цш  `Easy Customization Interface'   <CITE>Руководство по GNU Emacs</CITE>, для
подробностей об этом пакете.  Переменные Texinfo можно найти в группе
<SAMP>`Development/Docs/Texinfo'</SAMP>, когда вы вызвали команду <KBD>M-x
customize</KBD>.




<H2><A NAME="sec220">Использование списка локальных переменных</A></H2>
<P>
<A NAME="idx810"></A>
<A NAME="idx811"></A>
<A NAME="idx812"></A>


<P>
Еще один способ применить команду форматирования с TeX к
Texinfo-файлу -- поместить эту команду в <EM>список локальных
переменных</EM> в конце этого Texinfo-файла.  Вы можете задать команду
<CODE>tex</CODE> или <CODE>texi2dvi</CODE> в качестве переменной
<CODE>compile-command</CODE> и велеть Emacs запустить ее, напечатав <KBD>M-x
compile</KBD>.  Это создаст специальную оболочку, называемую буфером
<TT>`*compilation*'</TT>, в которой Emacs запускает команду компиляции.
Например, в конце файла <TT>`gdb.texinfo'</TT>, после <CODE>@bye</CODE>, вы могли
бы написать следующее:


<PRE>
Local Variables:
compile-command: "texi2dvi gdb.texinfo"
End:
</PRE>

<P>
Этот метод чаще всего применяется программистами, которые также
компилируют таким образом программы; смотрите С  цш  `Compilation'   <CITE>Руководство по GNU Emacs</CITE>.



<H2><A NAME="sec221">Обзор необходимого для форматирования с TeX</A></H2>
<P>
<A NAME="idx813"></A>
<A NAME="idx814"></A>
<A NAME="idx815"></A>


<P>
Каждый Texinfo-файл, предназначенный для обработки TeX, должен
начинаться командой <CODE>\input</CODE> и содержать команду
<CODE>@setfilename</CODE>:



<PRE>
\input texinfo
@setfilename <VAR>arg-not-used-by-TeX</VAR>
</PRE>

<P>
Первая команда указывает TeX загрузить макросы, которые нужны ему для
обработки Texinfo-файла, а вторая команда открывает вспомогательные
файлы.


<P>
Каждый Texinfo-файл должен заканчиваться строкой, прекращающей работу
TeX и выводящей незавершенные страницы:



<PRE>
@bye
</PRE>

<P>
Строго говоря, эти строки -- все, что нужно, чтобы Texinfo-файл был
успешно обработан TeX.


<P>
Однако, обычно начало включает команду <CODE>@settitle</CODE> для определения
названия печатного руководства, команду <CODE>@setchapternewpage</CODE>,
титульный лист, страницу с информацией об авторских правах и разрешения
на копирование.  Кроме <CODE>@bye</CODE>, конец файла обычно включает именные
указатели и содержание.  (И конечно, большинство руководств также
содержат тело текста.)


<P>
Для дальнейшей информации смотрите:

<UL>
<LI>С  цш  <A HREF="texinfo_4.html#sec30"><CODE>@settitle</CODE></A>,

<LI>С  цш  <A HREF="texinfo_4.html#sec31"><CODE>@setchapternewpage</CODE></A>,

<LI>С  цш  <A HREF="texinfo_27.html#sec258">Заголовки страниц</A>,

<LI>С  цш  <A HREF="texinfo_4.html#sec36">Титульный лист и страница с информацией об авторских правах</A>,

<LI>С  цш  <A HREF="texinfo_5.html#sec48">Меню-указатели и печать именных указателей</A>, а также

<LI>С  цш  <A HREF="texinfo_5.html#sec49">Создание содержания</A>.

</UL>



<H2><A NAME="sec222">Подготовка к применению TeX</A></H2>
<P>
<A NAME="idx816"></A>
<A NAME="idx817"></A>
<A NAME="idx818"></A>
<A NAME="idx819"></A>
<A NAME="idx820"></A>
<A NAME="idx821"></A>


<P>
TeX должен знать, где найти файл <TT>`texinfo.tex'</TT>, который вы
велели ему включить командой <SAMP>`\input texinfo'</SAMP> в начале первой
строки.  Файл <TT>`texinfo.tex'</TT> говорит TeX, как обращаться с
@-командами; он включается во все стандартные дистрибутивы GNU.


<P>
<A NAME="idx822"></A>
Обычно файл <TT>`texinfo.tex'</TT> помещается в каталог по умолчанию,
который содержит макросы TeX, когда устанавливается GNU Emacs или
другое программное обеспечение GNU.  (По умолчанию это
<TT>`/usr/local/share/texmf/tex/texinfo/texinfo.tex'</TT>.)  В этом случае
TeX сможет найти файл, и вам не понадобится делать ничего особенного.
Или вы можете поместить <TT>`texinfo.tex'</TT> в текущий каталог при запуске
TeX, и TeX найдет его там.


<P>
<A NAME="idx823"></A>
Также, вам нужно установить <TT>`epsf.tex'</TT> в то же место, что и
<TT>`texinfo.tex'</TT>, если он не был уже установлен из другого
дистрибутива.  Этот файл нужен для поддержки команды <CODE>@image</CODE>
(Т рзС зш С  цш  <A HREF="texinfo_14.html#sec174">Вставка рисунков</A>).


<P>
<A NAME="idx824"></A>
<A NAME="idx825"></A>
<A NAME="idx826"></A>
При желании вы можете создать дополнительный файл <TT>`texinfo.cnf'</TT> и
установить и его.  TeX читает этот файл во время исполнения команды
<CODE>@setfilename</CODE> (Т рзС зш С  цш  <A HREF="texinfo_4.html#sec29"><CODE>@setfilename</CODE></A>).  Вы
можете поместить в нем любые команды по вашему желанию, в соответствии с
локальными общесистемными соглашениями.  Они будут читаться TeX при
обработке любого документа Texinfo.  Например, если <TT>`texinfo.cnf'</TT>
содержит строку <SAMP>`@afourpaper'</SAMP> (Т рзС зш С  цш  <A HREF="texinfo_20.html#sec225">Печать на формате A4</A>), то все
документы Texinfo будут обрабатываться с таким размером страницы.  Если
вам нечего написать в <TT>`texinfo.cnf'</TT>, вам не обязательно его
создавать.


<P>
<A NAME="idx827"></A>
Если ни одно из указанных выше положений этих системных файлов для вас
не достаточно, вы можете задать каталоги явно.  Для <TT>`texinfo.tex'</TT>,
вы можете сделать это, написав полный путь к файлу после команды
<CODE>\input</CODE>.  Другой способ, работающий и для <TT>`texinfo.tex'</TT>, и
для <TT>`texinfo.cnf'</TT> (и любого другого файла, которой мог бы читать
TeX), -- установить переменную среды <CODE>TEXINPUTS</CODE> в вашем файле
<TT>`.cshrc'</TT> или <TT>`.profile'</TT>.


<P>
Какой из <TT>`.cshrc'</TT> или <TT>`.profile'</TT> вам нужен, зависит от того,
используете ли вы совместимый с Bourne shell (<CODE>sh</CODE>, <CODE>bash</CODE>,
<CODE>ksh</CODE>, ...) или совместимый с C shell (<CODE>csh</CODE>, <CODE>tcsh</CODE>)
командный интерпретатор.  Последний читает для инициализации файл
<TT>`.cshrc'</TT>, а первый читает <TT>`.profile'</TT>.


<P>
В файле <TT>`.cshrc'</TT>, вы можете использовать следующую
последовательность команд <CODE>csh</CODE>:



<PRE>
setenv TEXINPUTS .:/home/me/mylib:/usr/lib/tex/macros
</PRE>

<P>
В файле <TT>`.profile'</TT>, вы можете использовать следующую
последовательность команд <CODE>sh</CODE>:



<PRE>
TEXINPUTS=.:/home/me/mylib:/usr/lib/tex/macros
export TEXINPUTS
</PRE>

<P>
В MS-DOS/MS-Windows, вы могли бы сказать это таким образом
<A NAME="docf13" href="texinfo_foot.html#foot13">(13)</A>:



<PRE>
set TEXINPUTS=.;d:/home/me/mylib;c:/usr/lib/tex/macros
</PRE>

<P>
Обычно пользователи DOS/Windows помещают такие команды в файл
<TT>`autoexec.bat'</TT> или Реестр Windows.

<P>
Эти установки заставили бы TeX искать файл для <TT>`\input'</TT> сначала
в текущем каталоге, обозначаемом <SAMP>`.'</SAMP>, затем в каталоге
гипотетического пользователя <TT>`me/mylib'</TT> и, наконец, в системном
каталоге <TT>`/usr/lib/tex/macros'</TT>.

<P>
<A NAME="idx828"></A>
<A NAME="idx829"></A>
<A NAME="idx830"></A>
Наконец, вы можете захотеть сделать дамп форматного файла (Т рзС зш С  цш  `Memory dumps'   <CITE>Web2c</CITE>), чтобы TeX мог загружать Texinfo
быстрее.  (Недостаток этого в том, что при обновлении <TT>`texinfo.tex'</TT>
потребуется повторный дамп.)  Вы можете сделать это, запустив такую
команду, в предположении, что TeX находит <TT>`epsf.tex'</TT>:



<PRE>
initex texinfo @dump
</PRE>

<P>
(<CODE>@dump</CODE> -- это примитив TeX.)  Затем вам нужно перенести
<TT>`texinfo.fmt'</TT> в то место, где находятся ваши <CODE>.fmt</CODE>-файлы;
обычно это подкаталог <TT>`web2c'</TT> вашего TeX, например,
<TT>`/usr/local/share/tex/web2c'</TT>.




<H2><A NAME="sec223">Переполненные боксы</A></H2>
<P>
<A NAME="idx831"></A>
<A NAME="idx832"></A>
<A NAME="idx833"></A>


<P>
Иногда TeX не может набрать строку, не расширяя ее за правый край.
Это может случиться, когда TeX встречает что-то, что он
интерпретирует как длинное слово, которое он не может перенести, такое
как адрес электронной почты или очень длинный заголовок.  Когда такое
случается, TeX печатает сообщение об ошибке вроде этого:


<PRE>
Overfull @hbox (20.76302pt too wide)
</PRE>

<P>
<A NAME="idx834"></A>
(В TeX, строки являются "горизонтальными боксами", отсюда термин
"hbox".  <SAMP>`@hbox'</SAMP> -- это примитив TeX, не нужный в языке
Texinfo.)


<P>
TeX также выдает номер строки в исходном Texinfo-файле и текст плохой
строки, который помечен во всех местах, которые TeX счел точками
возможного переноса.  т рзС зш С  цш  <A HREF="texinfo_28.html#sec264">Поиск ошибок при форматировании с TeX</A>,
для большей информации об ошибках при наборе.


<P>
Если в Texinfo-файле есть переполненный горизонтальный бокс, вы можете
переписать предложение так, чтобы бокс не переполнялся, или вы можете
решить оставить его.  Небольшое вторжение на правое поле часто не играет
роли и даже может быть незаметно.


<P>
Если у вас есть много переполненных боксов и/или антипатия к
переписыванию, вы можете увеличить допустимый междусловный пропуск,
избегнув таким образом (если повезет) много неудачных разрывов строк;
это делается так:


<P>
<A NAME="idx835"></A>

<PRE>
@tex
\global\emergencystretch = .9\hsize
@end tex
</PRE>

<P>
(Вы можете подобрать дробь по необходимости.)  Такое огромное значение
для <CODE>\emergencystretch</CODE> не может приниматься по умолчанию, потому
что тогда набранный вывод был бы в основном заметно ниже качеством.
Значение по умолчанию равно <SAMP>`.15\hsize'</SAMP>.  <CODE>\hsize</CODE> -- это
размерность в TeX, содержащая текущую ширину строки.


<P>
<A NAME="idx836"></A>
<A NAME="idx837"></A>
<A NAME="idx838"></A>
<A NAME="idx839"></A>
Однако, для существующих переполненных боксов TeX будет печатать
большой уродливый черный прямоугольник после строки, содержащей
переполненный горизонтальный бокс, если не сказано иного.  Это делается,
чтобы вы заметили место, где возникла проблема, если вы корректируете
черновик.


<P>
<A NAME="idx840"></A>
Для предотвращения таких ужасов в вашей окончательной распечатке,
напишите следующее в начале Texinfo-файла на отдельной строке, перед
командой <CODE>@titlepage</CODE>:


<PRE>
@finalout
</PRE>



<H2><A NAME="sec224">Печать "маленьких" книг</A></H2>
<P>
<A NAME="idx841"></A>
<A NAME="idx842"></A>
<A NAME="idx843"></A>
<A NAME="idx844"></A>
<A NAME="idx845"></A>


<P>
По умолчанию, TeX набирает страницы для печати в формате 8.5 на 11
дюймов.  Однако, вы можете указать TeX набирать документ в формате
7 на 9.25 дюймов, который подходит для переплетенных книг, вставив
следующую команду на отдельной строке в начале Texinfo-файла, перед
титульным листом:


<PRE>
@smallbook
</PRE>

<P>
(Так как многие книги имеют размер примерно 7 на 9.25 дюймов, эту
команду лучше было бы назвать <CODE>@regularbooksize</CODE>, но она стала
называться командой <CODE>@smallbook</CODE> в сравнении с форматом 8.5 на 11
дюймов.)


<P>
Если вы пишите команду <CODE>@smallbook</CODE> между строк start-of-header и
end-of-header, то в режиме Texinfo команда форматирования области с
помощью TeX, <CODE>texinfo-tex-region</CODE>, будет форматировать область с
размером "маленькой" книги (Т рзС зш С  цш  <A HREF="texinfo_4.html#sec28">Начало заголовка</A>).

<P>
т рзС зш С  цш  <A HREF="texinfo_11.html#sec122">Команды блоков <CODE>@small...</CODE></A>, для информации о командах, облегчающих создание примеров
для меньших руководств.


<P>
т рзС зш С  цш  <A HREF="texinfo_20.html#sec216">Форматирование с помощью <CODE>texi2dvi</CODE></A>, и С  цш  <A HREF="texinfo_20.html#sec222">Подготовка к применению TeX</A>, другие способы отформатировать в
формате <CODE>@smallbook</CODE>, не требующие изменения исходного файла.




<H2><A NAME="sec225">Печать на формате A4</A></H2>
<P>
<A NAME="idx846"></A>
<A NAME="idx847"></A>
<A NAME="idx848"></A>
<A NAME="idx849"></A>


<P>
Вы можете сказать TeX форматировать документ для печати на бумаге
европейского формата A4 с помощью команды <CODE>@afourpaper</CODE>.  Пишите
эту команду на отдельной строке недалеко от начала Texinfo-файла, до
титульного листа.  Например, так вы могли бы написать заголовок для
данного руководства:



<PRE>
\input texinfo    @c -*-texinfo-*-
@c %**start of header
@setfilename texinfo
@settitle Texinfo
@afourpaper
@c %**end of header
</PRE>

<P>
т рзС зш С  цш  <A HREF="texinfo_20.html#sec216">Форматирование с помощью <CODE>texi2dvi</CODE></A>, С  цш  <A HREF="texinfo_20.html#sec222">Подготовка к применению TeX</A>, другие способы отформатировать в
формате <CODE>@afourpaper</CODE>, не требующие изменения исходного файла.


<P>
<A NAME="idx850"></A>
Вы можете предпочесть или не предпочесть форматирование, получающееся с
помощью команды <CODE>@afourlatex</CODE>.  Есть также команда
<CODE>@afourwide</CODE> для бумаги A4 в широком формате.




<H2><A NAME="sec226"><CODE>@pagesizes</CODE> [<VAR>ширина</VAR>][, <VAR>высота</VAR>]: Произвольный размер страниц</A></H2>
<P>
<A NAME="idx851"></A>
<A NAME="idx852"></A>
<A NAME="idx853"></A>
<A NAME="idx854"></A>
<A NAME="idx855"></A>
<A NAME="idx856"></A>
<A NAME="idx857"></A>
<A NAME="idx858"></A>


<P>
Вы можете явно задать высоту и (возможно) ширину области основного
текста на странице с помощью команды <CODE>@pagesizes</CODE>.  Пишите ее на
отдельной строке недалеко от начала Texinfo-файла, до титульного листа.
Сначала пишется высота, потом, если нужно, ширина, разделенные запятыми.
Примеры:



<PRE>
@pagesizes 200mm,150mm  
</PRE>

<P>
и

<PRE>
@pagesizes 11.5in      
</PRE>

<P>
<A NAME="idx859"></A>
<A NAME="idx860"></A>
Это может быть полезно при печати на формате B5.  Подчеркнем, эта
команда задает размер <EM>области текста</EM>, а не размер бумаги (который
равен 250mm на 177mm для B5, 14in на 8.5in для
legal).


<P>
<A NAME="idx861"></A>
Чтобы сделать более изощренные изменения, например изменение полей
страницы, вы должны определить новую команду в <TT>`texinfo.tex'</TT> (или
<TT>`texinfo.cnf'</TT>, Т рзС зш С  цш  <A HREF="texinfo_20.html#sec222">Подготовка к применению TeX</A>).


<P>
т рзС зш С  цш  <A HREF="texinfo_20.html#sec216">Форматирование с помощью <CODE>texi2dvi</CODE></A>, and С  цш  <A HREF="texinfo_20.html#sec222">Подготовка к применению TeX</A>, другие способы задать команду
<CODE>@pagesizes</CODE>, не требующие изменения исходного файла.


<P>
<CODE>@pagesizes</CODE> игнорируется <CODE>makeinfo</CODE>.




<H2><A NAME="sec227">Обрезные метки и увеличение</A></H2>
<P>
<A NAME="idx862"></A>
<A NAME="idx863"></A>
<A NAME="idx864"></A>
<A NAME="idx865"></A>
С помощью команды <CODE>@cropmarks</CODE> вы можете (попытаться) заставить
TeX печатать метки обреза листа в углах страниц.  Пишите эту команду
на отдельной строке между <CODE>@iftex</CODE> и <CODE>@end iftex</CODE> недалеко
от начала Texinfo-файла, до титульного листа, как показано здесь:



<PRE>
@iftex
@cropmarks
@end iftex
</PRE>

<P>
Это команда преимущественно для принтеров, которые набирают несколько
страниц на одном листе или одной пленке; но вы можете попытаться
применить ее для пометки углов книги с размером 7 на 9.25 дюймов,
установленным командой <CODE>@smallbook</CODE>.  (Принтеры могут не
напечатать обрезные метки для вывода обычного размера, напечатанного на
обычного размера бумаге.)  Так как различные печатающие устройства
работают по-разному, вам придется с духом приключения поисследовать
использование этой команды.  Вам, возможно, понадобится переопределить
эту команду в файле <TT>`texinfo.tex'</TT>.


<P>
<A NAME="idx866"></A>
<A NAME="idx867"></A>
<A NAME="idx868"></A>
Вы можете попытаться указать TeX печатать страницы большими или
меньшими, чем обычно, с помощью команды TeX <CODE>\mag</CODE>.  Весь набор
масштабируется пропорционально больше или пропорционально меньше.
(<CODE>\mag</CODE> обозначает "magnification", то есть "увеличение".)  Это
<EM>не</EM> @-команда Texinfo, а команда plain TeX, перед которой
ставится обратная косая черта.  Вы должны писать эту команду между
<CODE>@tex</CODE> и <CODE>@end tex</CODE> (Т рзС зш С  цш  <A HREF="texinfo_17.html#sec199">Непосредственный вызов команд программы форматирования</A>).


<P>
После команды <CODE>\mag</CODE> пишите <SAMP>`='</SAMP> и затем число, равное
желаемому увеличению, умноженному на 1000.  Например, чтобы напечатать
страницы размером в 1.2 от нормального, напишите следующее недалеко от
начала Texinfo-файла, до титульного листа:



<PRE>
@tex
\mag=1200
@end tex
</PRE>

<P>
В некоторых технологиях печати вы можете напечатать копии нормального
размера, выглядящие лучше, чем обычно, передав в типографию увеличенный
оригинал-макет.  Они производят уменьшение, улучшая в действительности
разрешение.


<P>
В зависимости от вашей системы, DVI-файлы, подготовленные с помощью
нестандартной <CODE>\mag</CODE>, могут не печататься или печататься только при
определенных увеличениях.  Будьте готовы к экспериментам.




<H2><A NAME="sec228">Вывод в PDF</A></H2>
<P>
<A NAME="idx869"></A>


<P>
<A NAME="idx870"></A>
Вы можете сгенерировать из исходного Texinfo-файла выходной PDF-файл,
используя для обработки вашего файла программу <CODE>pdftex</CODE>, а не
простой <CODE>tex</CODE>.  Просто запустите <SAMP>`pdftex foo.texi'</SAMP> вместо
<SAMP>`tex foo.texi'</SAMP> или задайте для <CODE>texi2dvi</CODE> ключ
<CODE>--pdf</CODE> .


<P>
PDF означает Portable Document Format<A NAME="docf14" href="texinfo_foot.html#foot14">(14)</A>, он был изобретен фирмой Adobe Systems.
<A HREF="http://www.adobe.com/prodindex/acrobat/adobepdf.html">Определение
формата файлов</A> доступно свободно, также доступен
<A HREF="http://www.foolabs.com/xpdf/">свободная программа просмотра</A> для
системы X Windows.  Поскольку PDF -- это двоичный формат, команды
<SAMP>`@ifpdf'</SAMP> или <SAMP>`@pdf'</SAMP>, по аналогии с другими выходными
форматами, не существует.


<P>
Несмотря на слово `переносимый' в названии, PDF-файлы близко не подходят
по переносимости к форматам простого ASCII (Info, HTML), которые также
поддерживаются Texinfo (о переносимости относительно DVI можно
поспорить).  Они также бывают намного больше, и в ни нет хорошей
поддержки растровых шрифтов, используемых в TeX (по умолчанию).  Тем
не менее, PDF-файл показывает на экране действительный печатный документ
как можно более правдиво, в отличие, скажем, от HTML, так что оба нужны.


<P>
Поддержа PDF в Texinfo довольно рудиментарна.
<P></P><HR>
 [<A HREF="texinfo_toc.html">Contents</A>] &#160; [<A HREF="texinfo_19.html">Previous</A>] &#160; [<A HREF="texinfo_21.html">Next</A>] &#160;<BR><HR><BR>

<!-- Rambler Stuff-->
<table Border=0 Width="100%" CELLPADDING="0" CELLSPACING="0" BORDER="0"
<tr>
<td ALign=Left vAlign=TOP>
<!--begin of Top100-->
<a href="http://top100.rambler.ru/top100/"><img src="http://counter.rambler.ru/top100.cnt?330202" alt="Rambler's Top100" width=1 height=1 border=0></a>
<!--end of Top100 code-->
</td>
<td ALign="Right" vALIGN=TOP>
<!--begin of Top100 logo-->
<a href="http://top100.rambler.ru/top100/">
<img src="http://top100-images.rambler.ru/top100/banner-88x31-rambler-blue.gif" alt="Rambler's Top100" width=88 height=31 border=0></a>
<!--end of Top100 logo -->
</td>
</tr>
</table>
<!--/Rambler Stuff -->
</body></html>


<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-38951496-1']);
  _gaq.push(['_trackPageview']);
  // st1 Sunday, 06-Dec-2015 19:08:25 MSK
  // st2 109.252.59.207
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
